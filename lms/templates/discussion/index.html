<%! import django_comment_client.helpers as helpers %>
<%! from django.template.defaultfilters import escapejs %>
<%inherit file="../main.html" />
<%namespace name='static' file='../static_content.html'/>
<%block name="bodyclass">discussion</%block>
<%block name="title"><title>Discussion â€“ ${course.number | h}</title></%block>

<%block name="headextra">
<%static:css group='course'/>
<%include file="_js_head_dependencies.html" />
</%block>

<%block name="js_extra">
<%include file="_js_body_dependencies.html" />
<%static:js group='discussion'/>
<script>
    $$contents = {};
    $$discussions = {};
    $$course_id = "${course_id}";
    DiscussionApp = {
        start: function() {
            window.user = new DiscussionUser(JSON.parse("${user_info | escapejs}"));
            var discussion = new Discussion(JSON.parse("${threads | escapejs}"));

            new DiscussionRouter({discussion: discussion});
            Backbone.history.start({pushState: true, root: "/courses/${course_id}/discussion/forum/"});
        }
    }
    $(document).ready(function() {
        DiscussionApp.start();
    });
</script>
</%block>

<%include file="../courseware/course_navigation.html" args="active_page='discussion'" />

<%include file="_new_discussion_templates.html" />
<script type="text/javascript" src="${static.url('js/discussions-temp.js')}"></script>

</section>

<div class="discussion container">
    <div class="discussion-body">
        <div class="sidebar"></div>
        <div class="discussion-column"></div>
    </div>
</div>
