<%! from django.core.urlresolvers import reverse %>

<%def name="make_chapter(chapter)">
  <div class="chapter">
    <h3 class="${"active" if chapter.get('active') else ""} ${"started" if chapter.get('started') else ""}">
       <a href="#">${chapter['display_name']}</a>
    </h3>

    <ul>
      % for section in chapter['sections']:

      <%
        css_class = ' '.join(['active' if section.get('active') else '',
                              'started' if section.get('started') else '',
                              'graded' if 'graded' in section and section['graded'] else ''])
      %>
      
          <li class="${css_class}">
            <a href="${reverse('courseware_section', args=[course_id, chapter['url_name'], section['url_name']])}">
              <p>${section['display_name']}</p>
              <p class="subtitle">${section['format']} ${"due " + section['due'] if 'due' in section and section['due'] != '' else ''}</p>
            </a>
          </li>
      % endfor
    </ul>
  </div>
</%def>

% for chapter in toc:
    ${make_chapter(chapter)}
% endfor
